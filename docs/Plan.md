# План автоматизации

### Сценарии для автоматизации
**1. Оплата по карте: успешная операция**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 11/22
- владелец = Нос Дарья
- cvc = 956
- Продолжить
- Сделать запрос в БД, чтобы найти запись об операции

Ожидамый результат: нотификация "Успешно", в БД есть запись APPROVED

**2. Оплата по карте: неуспешная операция**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4442
- дата = 11/22
- владелец = Нос Дарья
- cvc = 956
- Продолжить
- Сделать запрос в БД, чтобы найти запись об операции

Ожидамый результат: нотификация "Неуспешно", в БД есть запись DECLINED

**3. Оплата в кредит: успешная операция**

Исходное состояние: SUT запущен, выбрана страница "Купить в кредит"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 11/22
- владелец = Нос Дарья
- cvc = 956
- Продолжить
- Сделать запрос в БД, чтобы найти запись об операции

Ожидамый результат: нотификация "Успешно", в БД есть запись APPROVED

**4. Оплата в кредит: неуспешная операция**

Исходное состояние: SUT запущен, выбрана страница "Купить в кредит"
Шаги:
- номер карты = 4444 4444 4444 4442
- дата = 11/22
- владелец = Нос Дарья
- cvc = 956
- Продолжить
- Сделать запрос в БД, чтобы найти запись об операции

Ожидамый результат: нотификация "Неуспешно", в БД есть запись DECLINED

**5. Проверка поля Номер карты**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 
- дата = 11/22
- владелец = Нос Дарья
- cvc = 956
- Продолжить

Ожидамый результат: поле подсвечено, есть сообщение об ошибке "Неверный номер карты"

**6. Проверка поля Месяц (дата меньше текущей)**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 11/19
- владелец = Нос Дарья
- cvc = 956
- Продолжить

Ожидамый результат: поле Месяц подсвечено, есть сообщение об ошибке "Неверная дата"

**7. Проверка поля Год (дата меньше текущей)**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 12/18
- владелец = Нос Дарья
- cvc = 956
- Продолжить

Ожидамый результат: поле Год подсвечено, есть сообщение об ошибке "Неверная дата"

**8. Проверка полей Месяц, Год (дата равна текущей)**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 12/19
- владелец = Нос Дарья
- cvc = 956
- Продолжить

Ожидамый результат: нотификация "Успешно"

**9. Проверка поля cvc**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 12/23
- владелец = Нос Дарья
- cvc = 56
- Продолжить

Ожидамый результат: поле cvc подсвечено, есть сообщение об ошибке "Неверный код cvc"

**10. Проверка поля Имя (не заполнено)**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = 4444 4444 4444 4441
- дата = 12/23
- владелец = ""
- cvc = 567
- Продолжить

Ожидамый результат: поле cvc подсвечено, есть сообщение об ошибке "Поле Имя не заполнено"

**11. Проверка поля Номер карты (не заполнено)**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = ""
- дата = 12/22
- владелец = Нос Дарья
- cvc = 567
- Продолжить

Ожидамый результат: поле cvc подсвечено, есть сообщение об ошибке "Неверный формат"

**12. Проверка несуществующей карты**

Исходное состояние: SUT запущен, выбрана страница "Оплата по карте"
Шаги:
- номер карты = "1234123412341234"
- дата = 12/22
- владелец = Нос Дарья
- cvc = 567
- Продолжить

Ожидамый результат: не показана нотификация Успешно

13. Проверка покупки с несуществующей карты - REST
Исходное состояние: SUT запущен
Шаги:
Выполнить запрос:
- тип POST
- тело запроса 

```
{
    "number":"4444 4444 4444 4443",
    "year":"22",
    "month":"08",
    "holder":"Нос Дарья",
    "cvc":"999"
}
```

Ожидамый результат: получен ответ

```
{
    error: "Internal Server Error"
    message: "400 Bad Request"
    path: "/api/v1/credit"
    status: 500
    timestamp: "2019-12-09T10:24:23.736+0000"
}
```

### Перечень используемых инструментов

####Java 8

**Преимущества:**

* кросс-платформенная совместимость;
* поддержка ООП
* автоматическое управление памятью

####junit-jupiter: 5.5.1

**Преимущества:**

* большее количество аннотаций, по сравнению с 4 версией
* возможность создавать параметризованные тесты

####selenide: 5.3.1

**Преимущества:**

* более лаконичный синтаксис, по сравнению с selenuim
* автоматическое управление браузером
* автоматические скриншоты

####rest-assured: 4.1.2

**Преимущества:**

* хорошо подходит для проверки структуры ответов
* использует BDD-стиль given - when - then, что упрощает написание и восприятие кода

####Allure

**Преимущества:**

* подробные сценариии выполнения каждого теста
* наглядные отчеты
* возможность объединять перезапуски одного и того же теста

####хранилище кода - github.com

**Преимущества:**

* поддержка Git
* бесплатный хостинг для открытого кода, возможность создавать wiki;
* интеграция с баг-трекерами: Jira, Mantis, Bugzilla и др.

### Перечень и описание возможных рисков при автоматизации
* возникновение пролем в разворачиванием инфраструктуры: запуском контейнеров и SUT 
* отсутствие документации к сервису
* возникновение проблем с одновременной поддержкой MySql / Postgres
* отклонение от составленного плана тестирования (необходимость добавления новых тестов)
* написание диплома - не единственная деятельность тестировщика :) Возможны задержки, вызванные основной работой

### Оценка временных затрат
* без рисков: 44 человекочаса (33 ч/ч на тесты + 3 ч/ч на инфраструктуру + 8 ч/ч на отчетность)
* с рисками: 55 человекочасов (41 ч/ч на тесты + 4 ч/ч на инфраструктуру + 10 ч/чп на отчетность)

### План сдачи работ
* завершение кодирования тестов: 11.12.2019
* предоставление отчетности: 12.12.2019
